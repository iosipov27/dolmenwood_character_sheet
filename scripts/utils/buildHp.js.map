{"version":3,"file":"buildHp.js","sourceRoot":"","sources":["../../src/utils/buildHp.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,OAAO,CAAC,UAAmC;IACvD,MAAM,OAAO,GAAwC,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;IAE5E,4BAA4B;IAC5B,MAAM,aAAa,GAAG;QAClB,4BAA4B;QAC5B,8BAA8B;QAC9B,iBAAiB;QACjB,mBAAmB;QACnB,WAAW;KACd,CAAC;IAEF,wBAAwB;IACxB,MAAM,aAAa,GAAG;QAClB,0BAA0B;QAC1B,eAAe;KAClB,CAAC;IAEF,IAAI,WAAW,GAAkB,IAAI,CAAC;IACtC,IAAI,OAAO,GAAkB,IAAI,CAAC;IAElC,KAAK,MAAM,CAAC,IAAI,aAAa,EAAE,CAAC;QAC5B,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAChD,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC;YACxB,WAAW,GAAG,CAAC,CAAC;YAChB,MAAM;QACV,CAAC;IACL,CAAC;IAED,KAAK,MAAM,CAAC,IAAI,aAAa,EAAE,CAAC;QAC5B,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAChD,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC;YACxB,OAAO,GAAG,CAAC,CAAC;YACZ,MAAM;QACV,CAAC;IACL,CAAC;IAED,yCAAyC;IACzC,MAAM,OAAO,GAAG,WAAW;QACvB,CAAC,CAAE,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,WAAW,CAAY;QAC7D,CAAC,CAAC,IAAI,CAAC;IACX,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAE,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,OAAO,CAAY,CAAC,CAAC,CAAC,IAAI,CAAC;IAErF,OAAO;QACH,OAAO;QACP,GAAG;QACH,WAAW,EAAE,WAAW,IAAI,EAAE;QAC9B,OAAO,EAAE,OAAO,IAAI,EAAE;QACtB,UAAU,EAAE,OAAO,CAAC,WAAW,CAAC;QAChC,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC;KAC3B,CAAC;AACN,CAAC","sourcesContent":["import type { DwHpView } from \"../types.js\";\n\nexport function buildHp(systemData: Record<string, unknown>): DwHpView {\n    const wrapper: { system: Record<string, unknown> } = { system: systemData };\n\n    // candidates for current HP\n    const curCandidates = [\n        \"system.attributes.hp.value\",\n        \"system.attributes.hp.current\",\n        \"system.hp.value\",\n        \"system.hp.current\",\n        \"system.hp\"\n    ];\n\n    // candidates for max HP\n    const maxCandidates = [\n        \"system.attributes.hp.max\",\n        \"system.hp.max\"\n    ];\n\n    let currentPath: string | null = null;\n    let maxPath: string | null = null;\n\n    for (const p of curCandidates) {\n        const v = foundry.utils.getProperty(wrapper, p);\n        if (typeof v === \"number\") {\n            currentPath = p;\n            break;\n        }\n    }\n\n    for (const p of maxCandidates) {\n        const v = foundry.utils.getProperty(wrapper, p);\n        if (typeof v === \"number\") {\n            maxPath = p;\n            break;\n        }\n    }\n\n    // read values (may be null if not found)\n    const current = currentPath\n        ? (foundry.utils.getProperty(wrapper, currentPath) as number)\n        : null;\n    const max = maxPath ? (foundry.utils.getProperty(wrapper, maxPath) as number) : null;\n\n    return {\n        current,\n        max,\n        nameCurrent: currentPath ?? \"\",\n        nameMax: maxPath ?? \"\",\n        hasCurrent: Boolean(currentPath),\n        hasMax: Boolean(maxPath)\n    };\n}\n"]}