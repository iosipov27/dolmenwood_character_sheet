{"version":3,"file":"buildHp.js","sourceRoot":"","sources":["../../src/utils/buildHp.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,OAAO,CAAC,UAAmC;IACzD,MAAM,OAAO,GAAwC,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;IAE5E,4BAA4B;IAC5B,MAAM,aAAa,GAAG;QACpB,4BAA4B;QAC5B,8BAA8B;QAC9B,iBAAiB;QACjB,mBAAmB;QACnB,WAAW;KACZ,CAAC;IAEF,wBAAwB;IACxB,MAAM,aAAa,GAAG,CAAC,0BAA0B,EAAE,eAAe,CAAC,CAAC;IAEpE,IAAI,WAAW,GAAkB,IAAI,CAAC;IACtC,IAAI,OAAO,GAAkB,IAAI,CAAC;IAElC,KAAK,MAAM,CAAC,IAAI,aAAa,EAAE,CAAC;QAC9B,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAEhD,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC;YAC1B,WAAW,GAAG,CAAC,CAAC;YAChB,MAAM;QACR,CAAC;IACH,CAAC;IAED,KAAK,MAAM,CAAC,IAAI,aAAa,EAAE,CAAC;QAC9B,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAEhD,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC;YAC1B,OAAO,GAAG,CAAC,CAAC;YACZ,MAAM;QACR,CAAC;IACH,CAAC;IAED,yCAAyC;IACzC,MAAM,OAAO,GAAG,WAAW,CAAC,CAAC,CAAE,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,WAAW,CAAY,CAAC,CAAC,CAAC,IAAI,CAAC;IACjG,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAE,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,OAAO,CAAY,CAAC,CAAC,CAAC,IAAI,CAAC;IAErF,OAAO;QACL,OAAO;QACP,GAAG;QACH,WAAW,EAAE,WAAW,IAAI,EAAE;QAC9B,OAAO,EAAE,OAAO,IAAI,EAAE;QACtB,UAAU,EAAE,OAAO,CAAC,WAAW,CAAC;QAChC,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC;KACzB,CAAC;AACJ,CAAC","sourcesContent":["import type { DwHpView } from \"../types.js\";\r\n\r\nexport function buildHp(systemData: Record<string, unknown>): DwHpView {\r\n  const wrapper: { system: Record<string, unknown> } = { system: systemData };\r\n\r\n  // candidates for current HP\r\n  const curCandidates = [\r\n    \"system.attributes.hp.value\",\r\n    \"system.attributes.hp.current\",\r\n    \"system.hp.value\",\r\n    \"system.hp.current\",\r\n    \"system.hp\"\r\n  ];\r\n\r\n  // candidates for max HP\r\n  const maxCandidates = [\"system.attributes.hp.max\", \"system.hp.max\"];\r\n\r\n  let currentPath: string | null = null;\r\n  let maxPath: string | null = null;\r\n\r\n  for (const p of curCandidates) {\r\n    const v = foundry.utils.getProperty(wrapper, p);\r\n\r\n    if (typeof v === \"number\") {\r\n      currentPath = p;\r\n      break;\r\n    }\r\n  }\r\n\r\n  for (const p of maxCandidates) {\r\n    const v = foundry.utils.getProperty(wrapper, p);\r\n\r\n    if (typeof v === \"number\") {\r\n      maxPath = p;\r\n      break;\r\n    }\r\n  }\r\n\r\n  // read values (may be null if not found)\r\n  const current = currentPath ? (foundry.utils.getProperty(wrapper, currentPath) as number) : null;\r\n  const max = maxPath ? (foundry.utils.getProperty(wrapper, maxPath) as number) : null;\r\n\r\n  return {\r\n    current,\r\n    max,\r\n    nameCurrent: currentPath ?? \"\",\r\n    nameMax: maxPath ?? \"\",\r\n    hasCurrent: Boolean(currentPath),\r\n    hasMax: Boolean(maxPath)\r\n  };\r\n}\r\n"]}