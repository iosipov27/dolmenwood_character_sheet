{"version":3,"file":"rollChecks.js","sourceRoot":"","sources":["../../src/sheets/rollChecks.ts"],"names":[],"mappings":"AAAA,MAAM,OAAO,UAAU;IACrB,MAAM,CAAC,KAAK,CAAC,eAAe,CAC1B,KAAY,EACZ,KAAa,EACb,MAAc;QAEd,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;QAC9B,MAAM,IAAI,GAAG,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC/C,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QAEhC,MAAM,MAAM,GACV,+BAA+B,KAAK,SAAS;YAC7C,gBAAgB,CAAC,SAAS;YAC1B,mBAAmB,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,KAAK,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,SAAS,CAAC;QAE5F,MAAM,IAAI,CAAC,SAAS,CAAC;YACnB,OAAO,EAAE,WAAW,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,CAAC;YAC1C,MAAM;SACP,CAAC,CAAC;QAEH,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;IACtC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAC3B,KAAY,EACZ,YAAoB,EACpB,YAAoB;QAEpB,MAAM,MAAM,GAAG,MAAM,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC;QACzC,MAAM,IAAI,GAAG,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC/C,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC;QAErC,MAAM,MAAM,GACV,wCAAwC,YAAY,SAAS;YAC7D,cAAc,IAAI,CAAC,KAAK,cAAc,MAAM,SAAS;YACrD,mBAAmB,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,KAAK,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,SAAS,CAAC;QAE5F,MAAM,IAAI,CAAC,SAAS,CAAC;YACnB,OAAO,EAAE,WAAW,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,CAAC;YAC1C,MAAM;SACP,CAAC,CAAC;QAEH,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;IACnC,CAAC;CACF","sourcesContent":["export class RollChecks {\r\n  static async rollTargetCheck(\r\n    actor: Actor,\r\n    label: string,\r\n    target: number\r\n  ): Promise<{ roll: Roll; success: boolean; target: number }> {\r\n    const t = Number(target ?? 0);\r\n    const roll = await new Roll(\"1d20\").evaluate();\r\n    const success = roll.total >= t;\r\n\r\n    const flavor =\r\n      `<span class=\"dw-roll-title\">${label}</span>` +\r\n      ` - target <b>${t}</b> - ` +\r\n      `<span class=\"dw-${success ? \"success\" : \"fail\"}\">${success ? \"SUCCESS\" : \"FAIL\"}</span>`;\r\n\r\n    await roll.toMessage({\r\n      speaker: ChatMessage.getSpeaker({ actor }),\r\n      flavor\r\n    });\r\n\r\n    return { roll, success, target: t };\r\n  }\r\n\r\n  static async rollAbilityCheck(\r\n    actor: Actor,\r\n    abilityLabel: string,\r\n    abilityValue: number\r\n  ): Promise<{ roll: Roll; success: boolean; target: number }> {\r\n    const target = Number(abilityValue ?? 0);\r\n    const roll = await new Roll(\"1d20\").evaluate();\r\n    const success = roll.total <= target;\r\n\r\n    const flavor =\r\n      `<span class=\"dw-roll-title\">Ability: ${abilityLabel}</span>` +\r\n      ` - roll <b>${roll.total}</b> <= <b>${target}</b> - ` +\r\n      `<span class=\"dw-${success ? \"success\" : \"fail\"}\">${success ? \"SUCCESS\" : \"FAIL\"}</span>`;\r\n\r\n    await roll.toMessage({\r\n      speaker: ChatMessage.getSpeaker({ actor }),\r\n      flavor\r\n    });\r\n\r\n    return { roll, success, target };\r\n  }\r\n}\r\n"]}