{"version":3,"file":"reportError.js","sourceRoot":"","sources":["reportError.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,yBAAyB,EACzB,kCAAkC,EACnC,MAAM,0BAA0B,CAAC;AAClC,OAAO,EAAE,SAAS,EAAE,MAAM,0BAA0B,CAAC;AAMrD,SAAS,iBAAiB,CAAC,GAAqB,EAAE,QAAiB;IACjE,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;IAE/B,IAAI,CAAC,QAAQ;QAAE,OAAO,QAAQ,CAAC;IAE/B,IAAI,CAAC;QACH,OAAO,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC;IAC/C,CAAC;IAAC,MAAM,CAAC;QACP,OAAO,QAAQ,CAAC;IAClB,CAAC;AACH,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,OAAe,EAAE,KAAe;IAC1D,MAAM,YAAY,GAAG,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,OAAO,CAAC,CAAC,CAAC;IAC1F,MAAM,YAAY,GAAG,iBAAiB,CAAC,kCAAkC,EAAE,IAAI,CAAC,CAAC;IACjF,MAAM,SAAS,GAAG,iBAAiB,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;IAEtE,KAAK,CAAC,OAAO,CAAC,GAAG,SAAS,cAAc,EAAE,YAAY,EAAE;QACtD,GAAG,EAAE,OAAO;QACZ,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;QACrC,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;KAChC,CAAC,CAAC;AACL,CAAC","sourcesContent":["import {\n  ENABLE_DEBUG_LOGS_SETTING,\n  ENABLE_ERROR_NOTIFICATIONS_SETTING\n} from \"../constants/settings.js\";\nimport { MODULE_ID } from \"../constants/moduleId.js\";\n\ntype ModuleSettingKey =\n  | typeof ENABLE_DEBUG_LOGS_SETTING\n  | typeof ENABLE_ERROR_NOTIFICATIONS_SETTING;\n\nfunction getBooleanSetting(key: ModuleSettingKey, fallback: boolean): boolean {\n  const settings = game.settings;\n\n  if (!settings) return fallback;\n\n  try {\n    return Boolean(settings.get(MODULE_ID, key));\n  } catch {\n    return fallback;\n  }\n}\n\nexport function reportError(message: string, error?: unknown): void {\n  const wrappedError = error instanceof Error ? error : new Error(String(error ?? message));\n  const shouldNotify = getBooleanSetting(ENABLE_ERROR_NOTIFICATIONS_SETTING, true);\n  const shouldLog = getBooleanSetting(ENABLE_DEBUG_LOGS_SETTING, false);\n\n  Hooks.onError(`${MODULE_ID}.reportError`, wrappedError, {\n    msg: message,\n    notify: shouldNotify ? \"error\" : null,\n    log: shouldLog ? \"error\" : null\n  });\n}\n"]}